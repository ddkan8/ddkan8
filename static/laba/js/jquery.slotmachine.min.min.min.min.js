/*! SlotMachine - v2.0.7 - 2014-11-06
* https://github.com/josex2r/jQuery-SlotMachine
* Copyright (c) 2014 Jose Luis Represa; Licensed MIT */
;(function(q,o,B,v){var p="slotMachine",u={active:0,delay:200,auto:false,randomize:null,complete:null};var y="slotMachineBlurFast",s="slotMachineBlurMedium",t="slotMachineBlurSlow",A="slotMachineGradient",r=A;q(B).ready(function(){if(q("filter#slotMachineBlurFilterFast").length<=0){q("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterFast"><feGaussianBlur stdDeviation="5" /></filter></svg>')}if(q("filter#slotMachineBlurFilterMedium").length<=0){q("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterMedium"><feGaussianBlur stdDeviation="3" /></filter></svg>')}if(q("filter#slotMachineBlurFilterSlow").length<=0){q("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterSlow"><feGaussianBlur stdDeviation="1" /></filter></svg>')}if(q("mask#slotMachineFadeMask").length<=0){q("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox"><linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0"><stop stop-color="white" stop-opacity="0" offset="0"></stop><stop stop-color="white" stop-opacity="1" offset="0.25"></stop><stop stop-color="white" stop-opacity="1" offset="0.75"></stop><stop stop-color="white" stop-opacity="0" offset="1"></stop></linearGradient><rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect></mask></svg>')}q("body").append("<style>."+y+'{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url(#slotMachineBlurFilterFast);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="5")}.'+s+'{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url(#slotMachineBlurFilterMedium);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="3")}.'+t+'{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url(#slotMachineBlurFilterSlow);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="1")}.'+A+"{-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );mask: url(#slotMachineFadeMask);}</style>")});if(typeof q.easing.easeOutBounce!=="function"){q.extend(q.easing,{easeOutBounce:function(b,a,c,d,e){if((a/=e)<(1/2.75)){return d*(7.5625*a*a)+c}else{if(a<(2/2.75)){return d*(7.5625*(a-=(1.5/2.75))*a+0.75)+c}else{if(a<(2.5/2.75)){return d*(7.5625*(a-=(2.25/2.75))*a+0.9375)+c}else{return d*(7.5625*(a-=(2.625/2.75))*a+0.984375)+c}}}}})}function w(b,d){var c,e=this,g,h=b,f=arguments,a=d;this.running=false;this.onpause=function(){};this.onresume=function(){};this.cancel=function(){this.running=false;clearTimeout(g)};this.pause=function(){if(this.running){d-=new Date().getTime()-c;this.cancel();this.onpause()}};this.resume=function(){if(!this.running){this.running=true;c=new Date().getTime();g=setTimeout(function(){h.apply(e,Array.prototype.slice.call(f,2,f.length))},d);this.onresume()}};this.reset=function(){this.cancel();this.running=true;d=a;g=setTimeout(function(){h.apply(e,Array.prototype.slice.call(f,2,f.length))},a)};this.add=function(i){this.pause();d+=i;this.resume()};this.resume()}function z(a,b){this.element=a;this.settings=q.extend({},u,b);this.defaults=u;this.name=p;this.$slot=q(a);this.$tiles=this.$slot.children();this.$container=null;this._minTop=null;this._maxTop=null;this._$fakeFirstTile=null;this._$fakeLastTile=null;this._timer=null;this._oncompleteStack=[this.settings.complete];this._spinsLeft=null;this.futureActive=null;this.isRunning=false;this.active=this.settings.active;this.$slot.css("overflow","hidden");if(this.settings.active<0||this.settings.active>=this.$tiles.length){this.settings.active=0;this.active=0}this.$tiles.wrapAll("<div class='slotMachineContainer' />");this.$container=this.$slot.find(".slotMachineContainer");this._maxTop=-this.$container.height();this._$fakeFirstTile=this.$tiles.last().clone();this._$fakeLastTile=this.$tiles.first().clone();this.$container.prepend(this._$fakeFirstTile);this.$container.append(this._$fakeLastTile);this._minTop=-this._$fakeFirstTile.outerHeight();this.$container.css("margin-top",this.getTileOffset(this.active));if(this.settings.auto!==false){if(this.settings.auto===true){this.shuffle()}else{this.auto()}}}z.prototype.getTileOffset=function(a){var b=0;for(var c=0;c<a;c++){b+=q(this.$tiles.get(c)).outerHeight()}return -b+this._minTop};z.prototype.getVisibleTile=function(){var a=this.$tiles.first().height(),b=parseInt(this.$container.css("margin-top").replace(/px/,""),10);return Math.abs(Math.round(b/a))-1};z.prototype.setRandomize=function(b){if(typeof b==="number"){var a=function(){return b};this.settings.randomize=a}else{this.settings.randomize=b}};z.prototype.getRandom=function(b){var c,a=b||false;do{c=Math.floor(Math.random()*this.$tiles.length)}while((a&&c===this.active)&&c>=0);return c};z.prototype.getCustom=function(){var a;if(this.settings.randomize!==null&&typeof this.settings.randomize==="function"){var b=this.settings.randomize.apply(this,[this.active]);if(b<0||b>=this.$tiles.length){b=0}a=b}else{a=this.getRandom()}return a};z.prototype.getPrev=function(){var a=(this.active-1<0)?(this.$tiles.length-1):(this.active-1);return a};z.prototype.getNext=function(){var a=(this.active+1<this.$tiles.length)?(this.active+1):0;return a};z.prototype._setAnimationFX=function(c,b){var a=this;setTimeout(function(){a.$tiles.removeClass(y).removeClass(s).removeClass(t).addClass(c);if(b!==true||c===r){a.$slot.add(a.$tiles).removeClass(A)}else{a.$slot.add(a.$tiles).addClass(A)}},this.settings.delay/4)};z.prototype._resetPosition=function(){this.$container.css("margin-top",this.getTileOffset(this.active))};z.prototype.isVisible=function(){var b=this.$slot.offset().top>q(o).scrollTop()+q(o).height(),a=q(o).scrollTop()>this.$slot.height()+this.$slot.offset().top;return !b&&!a};z.prototype.prev=function(){this.futureActive=this.getPrev();this.isRunning=true;this.stop(false);return this.futureActive};z.prototype.next=function(){this.futureActive=this.getNext();this.isRunning=true;this.stop(false);return this.futureActive};z.prototype.shuffle=function(e,d){var c=this;if(d!==v){this._oncompleteStack[1]=d}this.isRunning=true;var b=this.settings.delay;if(this.futureActive===null){var a=this.getCustom();this.futureActive=a}if(typeof e==="number"){switch(e){case 1:case 2:this._setAnimationFX(t,true);break;case 3:case 4:this._setAnimationFX(s,true);b/=1.5;break;default:this._setAnimationFX(y,true);b/=2}}else{this._setAnimationFX(y,true);b/=2}this.$container.animate({marginTop:this._maxTop},b,"linear",function(){c.$container.css("margin-top",0);if(e-1<=0){c.stop()}else{c.shuffle(e-1)}});return this.futureActive};z.prototype.stop=function(a){if(!this.isRunning){return}var c=this;this.$container.clearQueue().stop(true,false);this._setAnimationFX(t,a===v?true:a);this.isRunning=true;this.active=this.getVisibleTile();if(this.futureActive>this.active){if(this.active===0&&this.futureActive===this.$tiles.length-1){this.$container.css("margin-top",this.getTileOffset(this.$tiles.length))}}else{if(this.active===this.$tiles.length-1&&this.futureActive===0){this.$container.css("margin-top",0)}}this.active=this.futureActive;this.futureActive=null;var b=this.settings.delay*3;this.$container.animate({marginTop:this.getTileOffset(this.active)},b,"easeOutBounce",function(){c.isRunning=false;if(typeof c._oncompleteStack[0]==="function"){c._oncompleteStack[0].apply(c,[c.active])}if(typeof c._oncompleteStack[1]==="function"){c._oncompleteStack[1].apply(c,[c.active])}});setTimeout(function(){c._setAnimationFX(r,false)},b/1.75);return this.active};z.prototype.auto=function(){var a=this;this._timer=new w(function(){if(typeof a.settings.randomize!=="function"){a.futureActive=a.getNext()}a.isRunning=true;a.shuffle(5,function(){a._timer.reset()})},this.settings.auto)};function x(c,a){var b;if(!q.data(c[0],"plugin_"+p)){b=new z(c,a);q.data(c[0],"plugin_"+p,b)}else{b=q.data(c[0],"plugin_"+p)}return b}q.fn[p]=function(a){if(this.length===1){return x(this,a)}else{return this.each(function(){if(!q.data(this,"plugin_"+p)){x(this,a)}})}}})(jQuery,window,document);