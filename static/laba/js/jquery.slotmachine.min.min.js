/*! SlotMachine - v2.0.7 - 2014-11-06
* https://github.com/josex2r/jQuery-SlotMachine
* Copyright (c) 2014 Jose Luis Represa; Licensed MIT */
;(function(u,s,r,z){var t="slotMachine",y={active:0,delay:200,auto:false,randomize:null,complete:null};var B="slotMachineBlurFast",w="slotMachineBlurMedium",x="slotMachineBlurSlow",q="slotMachineGradient",v=q;u(r).ready(function(){if(u("filter#slotMachineBlurFilterFast").length<=0){u("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterFast"><feGaussianBlur stdDeviation="5" /></filter></svg>')}if(u("filter#slotMachineBlurFilterMedium").length<=0){u("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterMedium"><feGaussianBlur stdDeviation="3" /></filter></svg>')}if(u("filter#slotMachineBlurFilterSlow").length<=0){u("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterSlow"><feGaussianBlur stdDeviation="1" /></filter></svg>')}if(u("mask#slotMachineFadeMask").length<=0){u("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox"><linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0"><stop stop-color="white" stop-opacity="0" offset="0"></stop><stop stop-color="white" stop-opacity="1" offset="0.25"></stop><stop stop-color="white" stop-opacity="1" offset="0.75"></stop><stop stop-color="white" stop-opacity="0" offset="1"></stop></linearGradient><rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect></mask></svg>')}u("body").append("<style>."+B+'{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url(#slotMachineBlurFilterFast);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="5")}.'+w+'{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url(#slotMachineBlurFilterMedium);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="3")}.'+x+'{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url(#slotMachineBlurFilterSlow);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="1")}.'+q+"{-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );mask: url(#slotMachineFadeMask);}</style>")});if(typeof u.easing.easeOutBounce!=="function"){u.extend(u.easing,{easeOutBounce:function(d,c,e,a,b){if((c/=b)<(1/2.75)){return a*(7.5625*c*c)+e}else{if(c<(2/2.75)){return a*(7.5625*(c-=(1.5/2.75))*c+0.75)+e}else{if(c<(2.5/2.75)){return a*(7.5625*(c-=(2.25/2.75))*c+0.9375)+e}else{return a*(7.5625*(c-=(2.625/2.75))*c+0.984375)+e}}}}})}function o(d,f){var e,g=this,a,b=d,h=arguments,c=f;this.running=false;this.onpause=function(){};this.onresume=function(){};this.cancel=function(){this.running=false;clearTimeout(a)};this.pause=function(){if(this.running){f-=new Date().getTime()-e;this.cancel();this.onpause()}};this.resume=function(){if(!this.running){this.running=true;e=new Date().getTime();a=setTimeout(function(){b.apply(g,Array.prototype.slice.call(h,2,h.length))},f);this.onresume()}};this.reset=function(){this.cancel();this.running=true;f=c;a=setTimeout(function(){b.apply(g,Array.prototype.slice.call(h,2,h.length))},c)};this.add=function(i){this.pause();f+=i;this.resume()};this.resume()}function p(a,b){this.element=a;this.settings=u.extend({},y,b);this.defaults=y;this.name=t;this.$slot=u(a);this.$tiles=this.$slot.children();this.$container=null;this._minTop=null;this._maxTop=null;this._$fakeFirstTile=null;this._$fakeLastTile=null;this._timer=null;this._oncompleteStack=[this.settings.complete];this._spinsLeft=null;this.futureActive=null;this.isRunning=false;this.active=this.settings.active;this.$slot.css("overflow","hidden");if(this.settings.active<0||this.settings.active>=this.$tiles.length){this.settings.active=0;this.active=0}this.$tiles.wrapAll("<div class='slotMachineContainer' />");this.$container=this.$slot.find(".slotMachineContainer");this._maxTop=-this.$container.height();this._$fakeFirstTile=this.$tiles.last().clone();this._$fakeLastTile=this.$tiles.first().clone();this.$container.prepend(this._$fakeFirstTile);this.$container.append(this._$fakeLastTile);this._minTop=-this._$fakeFirstTile.outerHeight();this.$container.css("margin-top",this.getTileOffset(this.active));if(this.settings.auto!==false){if(this.settings.auto===true){this.shuffle()}else{this.auto()}}}p.prototype.getTileOffset=function(c){var a=0;for(var b=0;b<c;b++){a+=u(this.$tiles.get(b)).outerHeight()}return -a+this._minTop};p.prototype.getVisibleTile=function(){var a=this.$tiles.first().height(),b=parseInt(this.$container.css("margin-top").replace(/px/,""),10);return Math.abs(Math.round(b/a))-1};p.prototype.setRandomize=function(b){if(typeof b==="number"){var a=function(){return b};this.settings.randomize=a}else{this.settings.randomize=b}};p.prototype.getRandom=function(a){var b,c=a||false;do{b=Math.floor(Math.random()*this.$tiles.length)}while((c&&b===this.active)&&b>=0);return b};p.prototype.getCustom=function(){var a;if(this.settings.randomize!==null&&typeof this.settings.randomize==="function"){var b=this.settings.randomize.apply(this,[this.active]);if(b<0||b>=this.$tiles.length){b=0}a=b}else{a=this.getRandom()}return a};p.prototype.getPrev=function(){var a=(this.active-1<0)?(this.$tiles.length-1):(this.active-1);return a};p.prototype.getNext=function(){var a=(this.active+1<this.$tiles.length)?(this.active+1):0;return a};p.prototype._setAnimationFX=function(b,a){var c=this;setTimeout(function(){c.$tiles.removeClass(B).removeClass(w).removeClass(x).addClass(b);if(a!==true||b===v){c.$slot.add(c.$tiles).removeClass(q)}else{c.$slot.add(c.$tiles).addClass(q)}},this.settings.delay/4)};p.prototype._resetPosition=function(){this.$container.css("margin-top",this.getTileOffset(this.active))};p.prototype.isVisible=function(){var b=this.$slot.offset().top>u(s).scrollTop()+u(s).height(),a=u(s).scrollTop()>this.$slot.height()+this.$slot.offset().top;return !b&&!a};p.prototype.prev=function(){this.futureActive=this.getPrev();this.isRunning=true;this.stop(false);return this.futureActive};p.prototype.next=function(){this.futureActive=this.getNext();this.isRunning=true;this.stop(false);return this.futureActive};p.prototype.shuffle=function(b,a){var e=this;if(a!==z){this._oncompleteStack[1]=a}this.isRunning=true;var d=this.settings.delay;if(this.futureActive===null){var c=this.getCustom();this.futureActive=c}if(typeof b==="number"){switch(b){case 1:case 2:this._setAnimationFX(x,true);break;case 3:case 4:this._setAnimationFX(w,true);d/=1.5;break;default:this._setAnimationFX(B,true);d/=2}}else{this._setAnimationFX(B,true);d/=2}this.$container.animate({marginTop:this._maxTop},d,"linear",function(){e.$container.css("margin-top",0);if(b-1<=0){e.stop()}else{e.shuffle(b-1)}});return this.futureActive};p.prototype.stop=function(c){if(!this.isRunning){return}var b=this;this.$container.clearQueue().stop(true,false);this._setAnimationFX(x,c===z?true:c);this.isRunning=true;this.active=this.getVisibleTile();if(this.futureActive>this.active){if(this.active===0&&this.futureActive===this.$tiles.length-1){this.$container.css("margin-top",this.getTileOffset(this.$tiles.length))}}else{if(this.active===this.$tiles.length-1&&this.futureActive===0){this.$container.css("margin-top",0)}}this.active=this.futureActive;this.futureActive=null;var a=this.settings.delay*3;this.$container.animate({marginTop:this.getTileOffset(this.active)},a,"easeOutBounce",function(){b.isRunning=false;if(typeof b._oncompleteStack[0]==="function"){b._oncompleteStack[0].apply(b,[b.active])}if(typeof b._oncompleteStack[1]==="function"){b._oncompleteStack[1].apply(b,[b.active])}});setTimeout(function(){b._setAnimationFX(v,false)},a/1.75);return this.active};p.prototype.auto=function(){var a=this;this._timer=new o(function(){if(typeof a.settings.randomize!=="function"){a.futureActive=a.getNext()}a.isRunning=true;a.shuffle(5,function(){a._timer.reset()})},this.settings.auto)};function A(b,c){var a;if(!u.data(b[0],"plugin_"+t)){a=new p(b,c);u.data(b[0],"plugin_"+t,a)}else{a=u.data(b[0],"plugin_"+t)}return a}u.fn[t]=function(a){if(this.length===1){return A(this,a)}else{return this.each(function(){if(!u.data(this,"plugin_"+t)){A(this,a)}})}}})(jQuery,window,document);