/*! SlotMachine - v2.0.7 - 2014-11-06
* https://github.com/josex2r/jQuery-SlotMachine
* Copyright (c) 2014 Jose Luis Represa; Licensed MIT */
;(function(l,n,a,g){var m="slotMachine",h={active:0,delay:200,auto:false,randomize:null,complete:null};var d="slotMachineBlurFast",j="slotMachineBlurMedium",i="slotMachineBlurSlow",b="slotMachineGradient",k=b;l(a).ready(function(){if(l("filter#slotMachineBlurFilterFast").length<=0){l("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterFast"><feGaussianBlur stdDeviation="5" /></filter></svg>')}if(l("filter#slotMachineBlurFilterMedium").length<=0){l("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterMedium"><feGaussianBlur stdDeviation="3" /></filter></svg>')}if(l("filter#slotMachineBlurFilterSlow").length<=0){l("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterSlow"><feGaussianBlur stdDeviation="1" /></filter></svg>')}if(l("mask#slotMachineFadeMask").length<=0){l("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox"><linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0"><stop stop-color="white" stop-opacity="0" offset="0"></stop><stop stop-color="white" stop-opacity="1" offset="0.25"></stop><stop stop-color="white" stop-opacity="1" offset="0.75"></stop><stop stop-color="white" stop-opacity="0" offset="1"></stop></linearGradient><rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect></mask></svg>')}l("body").append("<style>."+d+'{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url(#slotMachineBlurFilterFast);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="5")}.'+j+'{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url(#slotMachineBlurFilterMedium);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="3")}.'+i+'{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url(#slotMachineBlurFilterSlow);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="1")}.'+b+"{-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );mask: url(#slotMachineFadeMask);}</style>")});if(typeof l.easing.easeOutBounce!=="function"){l.extend(l.easing,{easeOutBounce:function(r,s,q,p,o){if((s/=o)<(1/2.75)){return p*(7.5625*s*s)+q}else{if(s<(2/2.75)){return p*(7.5625*(s-=(1.5/2.75))*s+0.75)+q}else{if(s<(2.5/2.75)){return p*(7.5625*(s-=(2.25/2.75))*s+0.9375)+q}else{return p*(7.5625*(s-=(2.625/2.75))*s+0.984375)+q}}}}})}function f(u,s){var t,r=this,p,o=u,q=arguments,v=s;this.running=false;this.onpause=function(){};this.onresume=function(){};this.cancel=function(){this.running=false;clearTimeout(p)};this.pause=function(){if(this.running){s-=new Date().getTime()-t;this.cancel();this.onpause()}};this.resume=function(){if(!this.running){this.running=true;t=new Date().getTime();p=setTimeout(function(){o.apply(r,Array.prototype.slice.call(q,2,q.length))},s);this.onresume()}};this.reset=function(){this.cancel();this.running=true;s=v;p=setTimeout(function(){o.apply(r,Array.prototype.slice.call(q,2,q.length))},v)};this.add=function(w){this.pause();s+=w;this.resume()};this.resume()}function c(p,o){this.element=p;this.settings=l.extend({},h,o);this.defaults=h;this.name=m;this.$slot=l(p);this.$tiles=this.$slot.children();this.$container=null;this._minTop=null;this._maxTop=null;this._$fakeFirstTile=null;this._$fakeLastTile=null;this._timer=null;this._oncompleteStack=[this.settings.complete];this._spinsLeft=null;this.futureActive=null;this.isRunning=false;this.active=this.settings.active;this.$slot.css("overflow","hidden");if(this.settings.active<0||this.settings.active>=this.$tiles.length){this.settings.active=0;this.active=0}this.$tiles.wrapAll("<div class='slotMachineContainer' />");this.$container=this.$slot.find(".slotMachineContainer");this._maxTop=-this.$container.height();this._$fakeFirstTile=this.$tiles.last().clone();this._$fakeLastTile=this.$tiles.first().clone();this.$container.prepend(this._$fakeFirstTile);this.$container.append(this._$fakeLastTile);this._minTop=-this._$fakeFirstTile.outerHeight();this.$container.css("margin-top",this.getTileOffset(this.active));if(this.settings.auto!==false){if(this.settings.auto===true){this.shuffle()}else{this.auto()}}}c.prototype.getTileOffset=function(q){var p=0;for(var o=0;o<q;o++){p+=l(this.$tiles.get(o)).outerHeight()}return -p+this._minTop};c.prototype.getVisibleTile=function(){var p=this.$tiles.first().height(),o=parseInt(this.$container.css("margin-top").replace(/px/,""),10);return Math.abs(Math.round(o/p))-1};c.prototype.setRandomize=function(o){if(typeof o==="number"){var p=function(){return o};this.settings.randomize=p}else{this.settings.randomize=o}};c.prototype.getRandom=function(p){var o,q=p||false;do{o=Math.floor(Math.random()*this.$tiles.length)}while((q&&o===this.active)&&o>=0);return o};c.prototype.getCustom=function(){var p;if(this.settings.randomize!==null&&typeof this.settings.randomize==="function"){var o=this.settings.randomize.apply(this,[this.active]);if(o<0||o>=this.$tiles.length){o=0}p=o}else{p=this.getRandom()}return p};c.prototype.getPrev=function(){var o=(this.active-1<0)?(this.$tiles.length-1):(this.active-1);return o};c.prototype.getNext=function(){var o=(this.active+1<this.$tiles.length)?(this.active+1):0;return o};c.prototype._setAnimationFX=function(o,p){var q=this;setTimeout(function(){q.$tiles.removeClass(d).removeClass(j).removeClass(i).addClass(o);if(p!==true||o===k){q.$slot.add(q.$tiles).removeClass(b)}else{q.$slot.add(q.$tiles).addClass(b)}},this.settings.delay/4)};c.prototype._resetPosition=function(){this.$container.css("margin-top",this.getTileOffset(this.active))};c.prototype.isVisible=function(){var o=this.$slot.offset().top>l(n).scrollTop()+l(n).height(),p=l(n).scrollTop()>this.$slot.height()+this.$slot.offset().top;return !o&&!p};c.prototype.prev=function(){this.futureActive=this.getPrev();this.isRunning=true;this.stop(false);return this.futureActive};c.prototype.next=function(){this.futureActive=this.getNext();this.isRunning=true;this.stop(false);return this.futureActive};c.prototype.shuffle=function(o,p){var q=this;if(p!==g){this._oncompleteStack[1]=p}this.isRunning=true;var r=this.settings.delay;if(this.futureActive===null){var s=this.getCustom();this.futureActive=s}if(typeof o==="number"){switch(o){case 1:case 2:this._setAnimationFX(i,true);break;case 3:case 4:this._setAnimationFX(j,true);r/=1.5;break;default:this._setAnimationFX(d,true);r/=2}}else{this._setAnimationFX(d,true);r/=2}this.$container.animate({marginTop:this._maxTop},r,"linear",function(){q.$container.css("margin-top",0);if(o-1<=0){q.stop()}else{q.shuffle(o-1)}});return this.futureActive};c.prototype.stop=function(q){if(!this.isRunning){return}var o=this;this.$container.clearQueue().stop(true,false);this._setAnimationFX(i,q===g?true:q);this.isRunning=true;this.active=this.getVisibleTile();if(this.futureActive>this.active){if(this.active===0&&this.futureActive===this.$tiles.length-1){this.$container.css("margin-top",this.getTileOffset(this.$tiles.length))}}else{if(this.active===this.$tiles.length-1&&this.futureActive===0){this.$container.css("margin-top",0)}}this.active=this.futureActive;this.futureActive=null;var p=this.settings.delay*3;this.$container.animate({marginTop:this.getTileOffset(this.active)},p,"easeOutBounce",function(){o.isRunning=false;if(typeof o._oncompleteStack[0]==="function"){o._oncompleteStack[0].apply(o,[o.active])}if(typeof o._oncompleteStack[1]==="function"){o._oncompleteStack[1].apply(o,[o.active])}});setTimeout(function(){o._setAnimationFX(k,false)},p/1.75);return this.active};c.prototype.auto=function(){var o=this;this._timer=new f(function(){if(typeof o.settings.randomize!=="function"){o.futureActive=o.getNext()}o.isRunning=true;o.shuffle(5,function(){o._timer.reset()})},this.settings.auto)};function e(o,q){var p;if(!l.data(o[0],"plugin_"+m)){p=new c(o,q);l.data(o[0],"plugin_"+m,p)}else{p=l.data(o[0],"plugin_"+m)}return p}l.fn[m]=function(o){if(this.length===1){return e(this,o)}else{return this.each(function(){if(!l.data(this,"plugin_"+m)){e(this,o)}})}}})(jQuery,window,document);